/*! js13k-breaker-panel - v0.0.5 - 2015-09-11 */

!function(a){"use strict";var b,c,d,e,f,g,h,i,j;b=document.createElement("svg"),c={viewBox:"0 0 100 100",version:"1.1",xmlns:"http://www,w3.org/2000/svg",width:"300",height:"300"};for(d in c)c.hasOwnProperty(d)&&b.setAttribute(d,c[d]);f=function(a){var b,c,d,e;switch(c=function(a){var b,c,d;for(b={},b.selectedElement=a.target,b.currentX=a.clientX,b.currentY=a.clientY,b.currentMatrix=b.selectedElement.getAttributeNS(null,"transform").slice(7,-1).split(" "),c=0,d=b.currentMatrix.length;d>c;c++)b.currentMatrix[c]=parseFloat(b.currentMatrix[c]);return b},d=function(a,b){var c,d,e;"undefined"!=typeof b&&(c=a.clientX-b.currentX,d=a.clientY-b.currentY,b.currentMatrix[4]+=c,b.currentMatrix[5]+=d,e="matrix("+b.currentMatrix.join(" ")+")",b.selectElement.setAttributeNS(null,"transform",e),b.currentX=a.clientX,b.currentY=a.clientY)},e=function(a,b){},console.log(a),a.type){case"mousedown":b=c(a);break;case"mousemove":d(a,b);break;case"mouseout":case"mouseup":e(a,b)}},g=function(a){var b,c,d,e,f,g,h,i,j,k;return a=a||{},a.id=a.id||"power-source",a.strokeWidth=a.strokeWidth||1,a.bb=a.bb||[0,0,25,100],d=a.bb[3]-a.bb[1],e=a.bb[2]-a.bb[0],f=a.bb[1]+d/2,g=.9*d,h=a.bb[0]+.25*e+" "+.05*d,i="v"+g,j="v"+.4*d+"m0 "+.1*d+"v"+.4*d,b=document.createElement("g"),b.setAttribute("id",a.id),b.setAttribute("transform","matrix(1 0 0 1 0 0)"),c=document.createElement("path"),c.setAttribute("stroke","#000000"),c.setAttribute("stroke-width",a.strokeWidth+""),c.setAttribute("d","m"+h+i+"m"+.25*e+" "+-g+j),b.appendChild(c),k=document.createElement("path"),k.setAttribute("stroke","#000000"),k.setAttribute("stroke-width",a.strokeWidth+""),k.setAttribute("class","live"),k.setAttribute("d","m"+.5*e+" "+f+"h"+.5*e),b.appendChild(k),b},i=function(a){var b,c,d,e,f,g;return a=a||{},a.id=a.id||"cable",a.strokeWidth=a.strokeWidth||1,a.inbound=a.inbound||[15,0],a.outbound=a.outbound||[50,100],c=a.inbound[0]+" "+a.inbound[1],d=a.outbound[0]+" "+a.outbound[1],e=a.inbound[0]+5+" "+a.inbound[1],f=a.outbound[0]-5+" "+a.outbound[1],b=document.createElement("g"),b.setAttribute("id",a.id),b.setAttribute("transform","matrix(1 0 0 1 0 0)"),g=document.createElement("path"),g.setAttribute("stroke","#000000"),g.setAttribute("stroke-width",a.strokeWidth+""),g.setAttribute("class","live"),g.setAttribute("d","M"+c+"C"+e+" "+f+" "+d),b.appendChild(g),b},h=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return a=a||{},a.id=a.id||"switch",a.strokeWidth=a.strokeWidth||1,a.bb=a.bb||[15,0,50,100],c=a.bb[3]-a.bb[1],d=a.bb[2]-a.bb[0],e=a.bb[1]+c/2,f=a.bb[0]+" "+.5*c,h=.05*d,j=.05*d,k=.05*d,l=a.bb[0]+h+2*k,q=l+" "+e,r=.6*d,n=l+r+k,b=document.createElement("g"),b.setAttribute("id",a.id),b.setAttribute("transform","matrix(1 0 0 1 0 0)"),g=document.createElement("path"),g.setAttribute("stroke","#000000"),g.setAttribute("stroke-width",a.strokeWidth+""),g.setAttribute("class","live"),g.setAttribute("d","m"+f+"h"+h),b.appendChild(g),m=document.createElement("circle"),m.setAttribute("r",k+""),m.setAttribute("cx",a.bb[0]+h+k+""),m.setAttribute("cy",e+""),b.appendChild(m),p=document.createElement("path"),p.setAttribute("stroke","#000000"),p.setAttribute("stroke-width",a.strokeWidth+""),p.setAttribute("class","live"),p.setAttribute("d","m"+q+"l"+r+" "+-k),b.appendChild(p),o=document.createElement("circle"),o.setAttribute("r",k+""),o.setAttribute("cx",a.bb[0]+h+2*k+r+""),o.setAttribute("cy",e+""),b.appendChild(o),i=document.createElement("path"),i.setAttribute("stroke","#000000"),i.setAttribute("stroke-width",a.strokeWidth+""),i.setAttribute("class","live"),i.setAttribute("d","m"+n+" "+e+"h"+j),b.appendChild(i),b},j=function(a){var b,c,d,e,f,g,h,i,j,k;return a=a||{},a.id=a.id||"consumer",a.strokeWidth=a.strokeWidth||1,a.bb=a.bb||[75,0,100,100],c=a.bb[3]-a.bb[1],d=a.bb[2]-a.bb[0],e=a.bb[1]+c/2,f=a.bb[0]+" "+.5*c,h=.2*d,j=.3*d,b=document.createElement("g"),b.setAttribute("id",a.id),b.setAttribute("transform","matrix(1 0 0 1 0 0)"),g=document.createElement("path"),g.setAttribute("stroke","#000000"),g.setAttribute("stroke-width",a.strokeWidth+""),g.setAttribute("class","live"),g.setAttribute("d","m "+a.bb[0]+" "+e+" h "+h),b.appendChild(g),i=document.createElement("circle"),i.setAttribute("r",j+""),i.setAttribute("cx",a.bb[0]+h+j+""),i.setAttribute("cy",e+""),b.appendChild(i),k=document.createElement("path"),k.setAttribute("stroke","#000000"),k.setAttribute("stroke-width",a.strokeWidth+""),k.setAttribute("d","m"+(a.bb[0]+j/2)+" "+e+"l"+2*j+" 0"),b.appendChild(k),b},a.JS13KBP=a.JS13KBP||{},e=a.JS13KBP,e.svg={svg:b,dragAndDrop:f,renderPowerSource:g,renderSwitchElement:h,renderCable:i,renderConsumer:j}}(this),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return m=function(){var a;return a=function(){},function(b,c){a.prototype=c.prototype,b.prototype=new a,b.superior=c.prototype,b.prototype.constructor=b}}(),n=function(a,b){var c,d,e;d=Object.prototype.toString,b=b||{};for(c in a)a.hasOwnProperty(c)&&(e=a[c],"object"==typeof e?(b[c]=Array.isArray(e)?[]:{},n(e,b[c])):b[c]=a[c]);return b},o=function(){var a,b,c,d,e;for(e={},a=0,c=arguments.length;c>a;a+=1){b=arguments[a];for(d in b)b.hasOwnProperty(d)&&(e[d]=b[d])}return e},t={name:"ElectronicElementError",message:"Must be an instance of ElectronicElement!",toString:function(){return this.name+": "+this.message}},r={name:"PowerSourceElementError",message:"Must be an instance of PowerSourceElement!",toString:function(){return this.name+": "+this.message}},s={name:"ConsumerElementError",message:"Must be an instance of ConsumerElement!",toString:function(){return this.name+": "+this.message}},p={setInput:function(a){if(!(a instanceof c))throw t;this._input=a,a._output=this},getInput:function(){return this._input},hasInput:function(){return"undefined"!=typeof this._input&&null!==this._input}},q={setOutput:function(a){if(!(a instanceof c))throw t;this._output=a,a._input=this},getOutput:function(){return this._output},hasOutput:function(){return"undefined"!=typeof this._output&&null!==this._output}},c=function a(b){if(!(this instanceof a))return new a(b);var c,d;d=this,a.count+=1,d._name=b+"-"+a.count,d._type="electronic",c="sizzles",d.getFeature=function(){return c}},c.count=0,d=c.prototype,d.getName=function(){return this._name},d.getType=function(){return this._type},n(o(p,q),d),d.renderSelf=function(a){var b,c;c=this,b="<img src='build/"+c._icon+"' alt='"+c._type+": "+c._name+"' />",a.innerHTML+=b},e=function(a){if(!(this instanceof e))return new e(a);var b;e.count+=1,b=this,b._name=a+"-"+e.count,b._type="switch",b._closed=!0,b._icon="switch",b._input=null,b._output=null},m(e,c),e.count=0,f=e.prototype,f.isClosed=function(){return this._closed},f.renderSelf=function(a){var b,c,d;c=this,d=c._closed?"closed":"open",b="<img src='build/"+c._icon+"-"+d+".svg' ",b+="alt='"+c._type+"-"+d+": "+c._name+"' />",a.innerHTML+=b},n(o(p,q),f),f.useSwitch=function(){this._closed=!this._closed},g=function(a){var b;return this instanceof g?(g.count+=1,b=this,b._name=a+"-"+g.count,b._type="power-source",void(b._output=null)):new g(a)},m(g,c),g.count=0,h=g.prototype,n(q,h),i=function(a){var b;return this instanceof i?(i.count+=1,b=this,b._name=a+"-"+i.count,b=this,b._type="consumer",void(b._input=null)):new i(a)},m(i,c),i.count=0,j=i.prototype,n(p,j),k=function(a){var b;return this instanceof k?(b=this,b._input=null,b._type="circuit",void(b._elements=[])):new k(a)},m(k,c),l=k.prototype,l.hasPowerSource=function(){var a;return a=this._elements.map(function(a){if(!(a instanceof c))throw t;return a.getType()}),-1!==a.indexOf("power-source")},l.addPowerSource=function(a){if(!(a instanceof g))throw r;this._elements.push(a)},l.hasConsumer=function(){var a;return a=this._elements.map(function(a){if(!(a instanceof c))throw t;return a.getType()}),-1!==a.indexOf("consumer")},l.addConsumer=function(a){if(!(a instanceof i))throw s;this._elements.push(a)},l.hasElectronic=function(){var a,b,d,e;for(a=this._elements.map(function(a){if(!(a instanceof c))throw t;return a.getType()}),b=function(a){var b;return b=["electronic","switch"],-1!==b.indexOf(a)?!0:!1},d=0,e=a.length;e>d;d+=1)if(b(a[d]))return!0;return!1},l.addElectronic=function(a){if(!(a instanceof c))throw t;this._elements.push(a)},l._mapElementsToLogic=function(){return this._elements.map(function(a){if(!(a instanceof c))throw t;switch(a.getType()){case"power-source":return a.hasOutput()&&null!==a.getOutput();case"consumer":return a.hasInput()&&null!==a.getInput();case"electronic":return a.hasInput()&&null!==a.getInput()&&a.hasOutput()&&null!==a.getOutput();case"switch":return a.hasInput()&&null!==a.getInput()&&a.hasOutput()&&null!==a.getOutput()&&a.isClosed();default:return!1}})},l.isCompleteCircuit=function(){return this.hasPowerSource()&&this.hasConsumer()&&this.hasElectronic()},l.isCircuitClosed=function(){var a;return this.isCompleteCircuit()?(a=this._mapElementsToLogic(),a.reduce(function(a,b){return a&&b})):!1},l.renderCircuitLogic=function(){var a,b,c,d,e,f,g;for(c={and:"∧",or:"∨",not:"¬"},a=this._mapElementsToLogic(),b=a.length?+a[0]:0,d=0,e=a.length-1;e>d;d+=1)f=a[d],g=a[d+1],b+=" "+c.and+" "+Number(g);return b+=" = "+Number(this.isCircuitClosed())},a.JS13KBP=a.JS13KBP||{},b=a.JS13KBP,b.element={ElectronicElement:c,SwitchElement:e,PowerSourceElement:g,ConsumerElement:i,CircuitElement:k},b}(this),function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;b=document.getElementById("game"),c=a.JS13KBP,d=c.element,l=c.svg,b.addEventListener("mousedown",l.dragAndDrop,!1),b.addEventListener("mousemove",l.dragAndDrop,!1),b.addEventListener("mouseout",l.dragAndDrop,!1),b.addEventListener("mouseup",l.dragAndDrop,!1),e=new d.PowerSourceElement("power-source"),f=new d.SwitchElement("switchElement"),g=new d.SwitchElement("se"),h=new d.SwitchElement("e"),i=new d.CircuitElement("circuit"),j=new d.ConsumerElement("consumer"),f.setInput(g),g.setInput(h),i.addPowerSource(e),i.addElectronic(f),i.addElectronic(g),i.addElectronic(h),i.addConsumer(j),k=document.createElement("div"),k.innerHTML+=i.renderCircuitLogic(),b.appendChild(l.svg),l.svg.appendChild(l.renderPowerSource({id:e.getType(),bb:[0,0,25,25]})),l.svg.appendChild(l.renderSwitchElement({id:g.getType(),bb:[25,0,50,25]})),l.svg.appendChild(l.renderCable({id:"cable",inbound:[50,12.5],outbound:[75,87.5]})),l.svg.appendChild(l.renderConsumer({id:j.getType(),bb:[75,75,100,100]})),l.svg.outerHTML=l.svg.outerHTML}(this);
//# sourceMappingURL=js13k-breaker-panel.min.js.map